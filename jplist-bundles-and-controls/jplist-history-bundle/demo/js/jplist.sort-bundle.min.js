/*
 jPList - jQuery Data Grid Controls - http://jplist.com 
 Copyright 2014 jPList Software. All rights reserved.
*/
(function(){var e=function(e){return jQuery.extend(this,e)};e.prototype.getStatus=function(e){e=new jQuery.fn.jplist.ui.controls.DefaultSortDTO(this.$control.attr("data-path"),this.$control.attr("data-type"),this.$control.attr("data-order"),this.$control.attr("data-datetime-format"),this.$control.attr("data-ignore"));return new jQuery.fn.jplist.app.dto.StatusDTO(this.name,this.action,this.type,e,this.inStorage,this.inAnimation,this.isAnimateToTop,this.inDeepLinking)};e.prototype.getPaths=function(e){var d,
a;d=this.$control.attr("data-path");a=this.$control.attr("data-type");d&&(d=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(d,a),e.push(d))};jQuery.fn.jplist.ui.controls.DefaultSort=function(g){return new e(g)};jQuery.fn.jplist.controlTypes["default-sort"]={className:"DefaultSort",options:{}}})();(function(){jQuery.fn.jplist.ui.controls.DefaultSortDTO=function(e,g,d,a,b){return{path:e,type:g,order:d,dateTimeFormat:a,ignore:b}}})();(function(){var e=function(b,a){var c;c=null;var f="",e="";a?(c=b.$control.find('option[data-default="true"]').eq(0),0>=c.length&&(c=b.$control.find("option").eq(0))):c=b.$control.find("option:selected");f=b.$control.attr("data-datetime-format")||"";e=b.$control.attr("data-ignore")||"";c=new jQuery.fn.jplist.ui.controls.DropdownSortDTO(c.attr("data-path"),c.attr("data-type"),c.attr("data-order"),f,e);return c=new jQuery.fn.jplist.app.dto.StatusDTO(b.name,b.action,b.type,c,b.inStorage,b.inAnimation,
b.isAnimateToTop,b.inDeepLinking)},g=function(b,a){var c,e,d;b.$control.find("option").each(function(){c=jQuery(this).attr("data-path");e=jQuery(this).attr("data-type");c&&(d=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(c,e),a.push(d))})},d=function(b){b.$control.on("change",function(){var a,c;a=e(b,!1);if(c=jQuery(this).find("option:selected").attr("data-path"))a.data.path=c,a.data.type=jQuery(this).attr("data-type"),a.data.order=jQuery(this).attr("data-order");b.history.addStatus(a);
b.observer.trigger(b.observer.events.statusChanged,[a])})},a=function(b){d(b);return jQuery.extend(this,b)};a.prototype.getStatus=function(b){return e(this,b)};a.prototype.getDeepLink=function(){var b="",a;this.inDeepLinking&&(a=e(this,!1),a.data&&a.data.path&&a.data.type&&a.data.order&&(b=this.name+this.options.delimiter0+"path"+this.options.delimiter2+"type"+this.options.delimiter2+"order="+a.data.path+this.options.delimiter2+a.data.type+this.options.delimiter2+a.data.order));return b};a.prototype.getStatusByDeepLink=
function(b,a){var c=null,f;this.inDeepLinking&&(c=e(this,!0),c.data&&b==="path"+this.options.delimiter2+"type"+this.options.delimiter2+"order"&&(f=a.split(this.options.delimiter2),3===f.length&&(c.data.path=f[0],c.data.type=f[1],c.data.order=f[2])));return c};a.prototype.getPaths=function(b){g(this,b)};a.prototype.setStatus=function(b,a){var c;c="default"==b.data.path?this.$control.find('option[data-path="'+b.data.path+'"]'):this.$control.find('option[data-path="'+b.data.path+'"][data-type="'+b.data.type+
'"][data-order="'+b.data.order+'"]');0<c.length&&(c.get(0).selected=!0)};jQuery.fn.jplist.ui.controls.SortSelect=function(b){return new a(b)};jQuery.fn.jplist.controlTypes["sort-select"]={className:"SortSelect",options:{}}})();(function(){var e=function(b,a){var c=null,e,d;a?(c=b.$control.find('li:has(span[data-default="true"])').eq(0),0>=c.length&&(c=b.$control.find("li:eq(0)"))):c=b.$control.find(".active");c=c.find("span");e=b.$control.attr("data-datetime-format")||"";d=b.$control.attr("data-ignore")||"";c=new jQuery.fn.jplist.ui.controls.DropdownSortDTO(c.attr("data-path"),c.attr("data-type"),c.attr("data-order"),e,d);return c=new jQuery.fn.jplist.app.dto.StatusDTO(b.name,b.action,b.type,c,b.inStorage,b.inAnimation,
b.isAnimateToTop,b.inDeepLinking)},g=function(b,a){var c,e,d;b.$control.find("span").each(function(){c=jQuery(this).attr("data-path");e=jQuery(this).attr("data-type");c&&""!==jQuery.trim(c)&&(d=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(c,e),a.push(d))})},d=function(b){b.$control.find("li").off().on("click",function(){var a,c,d;a=e(b,!1);d=jQuery(this).find("span");if(c=d.attr("data-path"))a.data.path=c,a.data.type=d.attr("data-type"),a.data.order=d.attr("data-order");b.history.addStatus(a);
b.observer.trigger(b.observer.events.statusChanged,[a])})},a=function(a){new jQuery.fn.jplist.ui.panel.DropdownControl(a.options,a.observer,a.history,a.$control);d(a);return jQuery.extend(this,a)};a.prototype.getStatus=function(a){return e(this,a)};a.prototype.getDeepLink=function(){var a="",d;this.inDeepLinking&&(d=e(this,!1),d.data&&d.data.path&&d.data.type&&d.data.order&&(a=this.name+this.options.delimiter0+"path"+this.options.delimiter2+"type"+this.options.delimiter2+"order="+d.data.path+this.options.delimiter2+
d.data.type+this.options.delimiter2+d.data.order));return a};a.prototype.getStatusByDeepLink=function(a,d){var c;a:{c=null;var f;if(this.inDeepLinking){if("number"!==a&&a!=="path"+this.options.delimiter2+"type"+this.options.delimiter2+"order"&&"path"!==a){c=null;break a}c=e(this,!0);c.data&&a==="path"+this.options.delimiter2+"type"+this.options.delimiter2+"order"&&(f=d.split(this.options.delimiter2),3===f.length&&(c.data.path=f[0],c.data.type=f[1],c.data.order=f[2]))}}return c};a.prototype.getPaths=
function(a){g(this,a)};a.prototype.setStatus=function(a,d){var c,e;e=this.$control.find("li");e.removeClass("active");c="default"==a.data.path?this.$control.find('li:has([data-path="default"])'):this.$control.find('li:has([data-path="'+a.data.path+'"][data-type="'+a.data.type+'"][data-order="'+a.data.order+'"])');0>=c.length&&(c=e.eq(0));c.addClass("active");this.$control.find(".jplist-dd-panel").text(c.eq(0).text())};jQuery.fn.jplist.ui.controls.SortDropdown=function(b){return new a(b)};jQuery.fn.jplist.controlTypes["sort-drop-down"]=
{className:"SortDropdown",options:{},dropdown:!0}})();(function(){jQuery.fn.jplist.ui.controls.DropdownSortDTO=function(e,g,d,a,b){return{path:e,type:g,order:d,dateTimeFormat:a,ignore:b}}})();(function(){jQuery.fn.jplist.ui.controls.SortButtonDTO=function(e,g,d,a,b,h){return{path:e,type:g,order:d,dateTimeFormat:a,ignore:b,selected:h}}})();(function(){var e=function(a,b){var d,c;c=null;d=a.$control.data("storage-status");b&&d?c=d:(d=b?"true"===a.$control.attr("data-selected"):a.params.selected,a.params.dataPath&&(c=d?new jQuery.fn.jplist.ui.controls.SortButtonDTO(a.params.dataPath,a.params.dataType,a.params.dataOrder,a.params.dataDateTimeFormat,a.params.dataIgnore,d):new jQuery.fn.jplist.ui.controls.SortButtonDTO("",a.params.dataType,a.params.dataOrder,a.params.dataDateTimeFormat,a.params.dataIgnore,d),c=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,
a.action,a.type,c,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking)));return c},g=function(a){a.$control.on("click",function(){a.params.selected=!a.params.selected;a.history.addStatus(e(a,!1));a.observer.trigger(a.observer.events.unknownStatusesChanged,[!1])})},d=function(a){a.params={dataPath:a.$control.attr("data-path"),dataType:a.$control.attr("data-type"),dataOrder:a.$control.attr("data-order"),dataDateTimeFormat:a.$control.attr("data-datetime-format"),dataIgnore:a.$control.attr("data-ignore"),
selected:"true"===a.$control.attr("data-selected"),$buttons:a.$root.find('[data-control-type="sort-button"]')};g(a);return jQuery.extend(this,a)};d.prototype.getStatus=function(a){return e(this,a)};d.prototype.getDeepLink=function(){var a="",b;this.inDeepLinking&&(b=e(this,!1),b.data&&b.data.selected&&(a=this.name+this.options.delimiter0+"selected=true"));return a};d.prototype.getStatusByDeepLink=function(a,b){var d=null;this.inDeepLinking&&(d=e(this,!1),d.data&&"selected"===a&&"true"===b&&(d.data.selected=
!0));return d};d.prototype.getPaths=function(a){var b;this.params.dataPath&&(b=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(this.params.dataPath,this.params.dataType),a.push(b))};d.prototype.setStatus=function(a,b){this.inStorage&&b&&this.$control.data("storage-status",a);(this.params.selected=a.data.selected)?this.$control.addClass("jplist-selected"):this.$control.removeClass("jplist-selected")};jQuery.fn.jplist.ui.controls.SortButton=function(a){return new d(a)};jQuery.fn.jplist.controlTypes["sort-button"]=
{className:"SortButton",options:{}}})();
